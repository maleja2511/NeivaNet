
{% extends 'base.html' %} {% load static %} {% block content %}
<h2 class="register-title">Update Profile</h2>
<form method="post" class="register-form" enctype="multipart/form-data">
  {% csrf_token %}
  <div class="form-group">
    <label for="id_profile_picture">Profile picture:</label>
    <br />
    Currently: 
    {% if user.userprofile and user.userprofile.profile_picture and user.userprofile.profile_picture.url != 'default.jpg' %}
    <img
      src="{{ user.userprofile.profile_picture.url }}"
      alt="Current Profile Pic"
      width="50"
    />
    {% else %}
    <img
      src="{% static 'default_profile_pic.png' %}"
      alt="Default Profile Pic"
      width="50"
    />
    {% endif %}
    <br />
    Change:
    <input type="file" name="profile_picture" id="id_profile_picture" />
  </div>

  <!-- Add first_name and last_name fields -->
  <div class="form-group">
    <label for="id_first_name">First Name:</label>
    <input
      type="text"
      name="first_name"
      id="id_first_name"
      value="{{ user.first_name }}"
    />
  </div>
  <div class="form-group">
    <label for="id_last_name">Last Name:</label>
    <input
      type="text"
      name="last_name"
      id="id_last_name"
      value="{{ user.last_name }}"
    />
  </div>
  <div class="form-group">
    {{ form.date_of_birth.label_tag }} {{ form.date_of_birth }}
  </div>

  {% if form.errors %}
  <ul class="errorlist">
    {% for error in form.errors %}
    <li>{{ error|escape }}</li>
    {% endfor %}
  </ul>
  {% endif %}

  <button type="submit" class="register-button">Update</button>
</form>
{% endblock %}